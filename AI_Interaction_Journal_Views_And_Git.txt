C372 Graded Assignment – AI Interaction Journal (Views, Styling, Search & Git)
Student ID:
Student Name:
Class:

This file documents how I used a generative AI assistant (GitHub Copilot Chat) to design and refine my views (shopping, product detail, order detail, help center), client-side search behavior, and Git/GitHub workflow for the FA GA Skincare project.

====================================================================
Task 1 – Shopping Page UI & Layout (views/shopping.ejs, public/css/style.css)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to redesign the Shopping page so that it looks like a modern luxury skincare site (hero + product grid + filters), while keeping all existing functionality: category filter, product links, add-to-cart behavior, and stock display.

GOAL(S)
• Build a hero section with headline, CTA, and hero image similar to the reference design.
• Keep existing server data usage: `products`, `categories`, `category`.
• Make product cards, background, and filters visually consistent and not plain.

PREPARATION WORK(S)
• Opened `views/shopping.ejs` and studied the existing markup and logic.
• Opened `public/css/style.css` to see global styles and existing shopping CSS.
• Confirmed that `/shopping` route passes `products` and optional `category` from the controller.

AI TOOL(S) USED
• GitHub Copilot Chat inside VS Code.

RELEVANT SOURCE CODE FILE(S)
• `views/shopping.ejs`
• `public/css/style.css`

PROMPT(S) USED
• "Redesign the whole shopping page to look like this and make sure all the current functions stay and it will look super fancy like the picture I attached."
• "Use more colours for different things on the shopping page so it’s not one full plain colour."

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **Hero section and toolbar markup in `views/shopping.ejs`:**

```ejs
<section class="shop-hero mb-4">
  <div class="shop-hero-left">
    <div class="shop-hero-eyebrow">For your active summer</div>
    <h2 class="shop-hero-title">Refined skincare that keeps up with your every day.</h2>
    <p class="shop-hero-copy">Enjoy your routine with our latest serums, cleansers and creams – created to look minimal on your shelf and feel luxurious on your skin.</p>
    <div class="shop-hero-cta-row">
      <button class="btn btn-cta" id="heroViewAll">Shop now</button>
      <span class="shop-hero-tagline">Free shipping over $80 • Clean formulations • Everyday essentials</span>
    </div>
  </div>
  <div class="shop-hero-right">
    <div class="shop-hero-product-shot" aria-hidden="true"></div>
  </div>
</section>

<!-- Subheader and toolbar (filters + search) -->
<div class="shop-subheader">
  <div>
    <h3>Shop luxury skincare rituals</h3>
    <p class="shop-subcopy">Filter by category, search by name and add to your GlowAura cart in one place.</p>
  </div>
  <div class="shop-toolbar">
    <div class="d-flex flex-wrap align-items-center gap-2">
      <% renderCategories.forEach(function(c){ %>
        <button class="category-chip" data-cat="<%= c %>"><%= c %></button>
      <% }) %>
    </div>
    <div class="search-controls d-flex align-items-center">
      <input id="searchBox" class="form-control" placeholder="Search items by name...">
      <label for="filterCategory" class="visually-hidden">Category</label>
      <select id="filterCategory" class="form-select d-inline-block w-auto">
        <option value="">All</option>
        <% renderCategories.forEach(function(c){ %>
          <option value="<%= c %>" <%= (typeof category !== 'undefined' && category === c) ? 'selected' : '' %>><%= c %></option>
        <% }) %>
      </select>
      <button id="clearSearch" class="btn btn-outline-secondary">Clear</button>
    </div>
  </div>
</div>
```

2) **Product card layout in `views/shopping.ejs`:**

```ejs
<div id="productsGrid" class="product-row">
  <% for(let i=0; i < products.length; i++) { const p = products[i]; const stock = Number(p.quantity) || 0; const outOfStock = stock <= 0; %>
    <div class="card product-card">
      <a href="/product/<%= p.id %>">
        <div class="product-card-img-wrap">
          <img src="/images/<%= p.image %>" class="card-img-top" alt="<%= p.productName %>">
        </div>
      </a>
      <div class="card-body d-flex flex-column">
        <div class="d-flex justify-content-between align-items-start mb-1">
          <h5 class="card-title mb-0"><%= p.productName %></h5>
          <span class="stock-pill">Stock: <strong><%= stock %></strong></span>
        </div>
        <p class="card-meta mb-2"><%= p.category || '' %></p>
        <div class="mt-auto d-flex align-items-center justify-content-between">
          <div class="price mb-0">$<%= (Number(p.price) || 0).toFixed(2) %></div>
        </div>
      </div>
      <div class="product-card-footer">
        <a href="/product/<%= p.id %>" class="btn btn-outline-dark btn-sm">View details</a>
        <% if (outOfStock) { %>
          <span class="badge bg-secondary">Out of stock</span>
        <% } else { %>
          <form action="/add-to-cart/<%= p.id %>" method="POST" class="d-flex align-items-center m-0">
            <select name="quantity" class="form-select form-select-sm me-2" style="width:72px">
              <% const maxSelectable = Math.min(stock, 5); for (let q = 1; q <= maxSelectable; q++) { %>
                <option value="<%= q %>"><%= q %></option>
              <% } %>
            </select>
            <button type="submit" class="btn btn-success btn-sm">Add</button>
          </form>
        <% } %>
      </div>
    </div>
  <% } %>
</div>
```

3) **Shopping-specific CSS in `public/css/style.css` (hero, cards, chips):**

```css
.shop-wrapper{
  padding:3rem 0 4rem 0;
  background: linear-gradient(to bottom, #f6f1ea, #f3ece4);
}
.shop-hero{
  background: linear-gradient(135deg,#f5eee5,#f9f4ec);
  ```js
  // JS gate: camera preview + fake face scan must complete before submit is enabled (one-time only)
  (function(){
    const startBtn = document.getElementById('startBioScan');
    const statusLabel = document.getElementById('bio-status-label');
    const instruction = document.getElementById('bio-instruction');
    const submitBtn = document.getElementById('registerSubmit');
    const frame = document.querySelector('.bio-face-frame');
    const video = document.getElementById('bioVideo');
    if (!startBtn || !statusLabel || !instruction || !submitBtn || !frame) return;
    let scanning = false;
    let completed = false;
    let activeStream = null;
    startBtn.addEventListener('click', function(){
      if (scanning || completed) return;
      scanning = true;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Starting camera...';

      const startFakeScan = function(){
        submitBtn.textContent = 'Scanning face...';
        statusLabel.textContent = 'Scanning';
        instruction.textContent = 'Keep your face inside the frame while we verify...';
        frame.classList.add('is-scanning');
        setTimeout(function(){
          frame.classList.remove('is-scanning');
          frame.classList.add('is-verified');
          statusLabel.textContent = 'Verified';
          instruction.textContent = 'Biometric check completed successfully. Camera can now be closed.';
          submitBtn.disabled = false;
          submitBtn.textContent = 'Create account';
          completed = true;
          startBtn.disabled = true;
          startBtn.textContent = 'Scan completed';
          if (activeStream) {
            activeStream.getTracks().forEach(function(track){ track.stop(); });
            activeStream = null;
          }
          scanning = false;
        }, 2800);
      };

      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia && video) {
        navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } }).then(function(stream){
          activeStream = stream;
          try {
            video.srcObject = stream;
          } catch (e) {
            video.src = window.URL.createObjectURL(stream);
          }
          video.play().catch(function(){});
          startFakeScan();
        }).catch(function(){
          instruction.textContent = 'Camera permission denied. Proceeding with simulated scan only.';
          startFakeScan();
        });
      } else {
        instruction.textContent = 'Camera not available. Proceeding with simulated scan only.';
        startFakeScan();
      }
    });
  })();
  ```
• Replace basic text with a proper product sheet.
• Keep `product` data usage and POST `/add-to-cart/:id` the same.
• Show clear stock state and only allow add-to-cart if stock > 0 and role is `user`.

PREPARATION WORK(S)
• Opened `views/product.ejs` and identified current logic for `product`, `stock`, and `user.role`.
• Checked styles file to add new classes that match the rest of the site.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/product.ejs`
• `public/css/style.css`

PROMPT(S) USED
• "For the product details page can you make it look nicer." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **New product detail layout in `views/product.ejs`:**

```ejs
<div class="container mt-5 mb-5 product-detail-wrapper">
  <% if (product) { const stock = Number(product.quantity) || 0; %>
    <div class="product-detail-card">
      <div class="product-detail-image-col">
        <div class="product-detail-image-wrap">
          <img src="/images/<%= product.image %>" alt="<%= product.productName %>" class="product-detail-image">
        </div>
      </div>
      <div class="product-detail-info-col">
        <p class="product-detail-kicker">GlowAura Skin • Daily ritual</p>
        <h1 class="product-detail-title"><%= product.productName %></h1>
        <p class="product-detail-price">$<%= (Number(product.price) || 0).toFixed(2) %></p>

        <div class="product-detail-meta-row">
          <span class="product-detail-stock-pill <%= stock <= 0 ? 'is-out' : '' %>">
            <%= stock <= 0 ? 'Out of stock' : ('In stock · ' + stock + ' left') %>
          </span>
        </div>

        <p class="product-detail-copy">
          A thoughtfully crafted formula designed to leave your skin feeling calm, hydrated and refined.
        </p>

        <% if (user.role === 'user') { %>
          <% if (stock > 0) { %>
            <form action="/add-to-cart/<%= product.id %>" method="POST" class="product-detail-add-row">
              <div class="product-detail-qty-group">
                <label class="form-label mb-1">Quantity</label>
                <select name="quantity" class="form-select form-select-sm">
                  <% const maxSelectable = Math.min(stock, 5); for (let q = 1; q <= maxSelectable; q++) { %>
                    <option value="<%= q %>"><%= q %></option>
                  <% } %>
                </select>
              </div>
              <button type="submit" class="btn btn-dark product-detail-add-btn">Add to cart</button>
            </form>
          <% } else { %>
            <p class="mt-3"><span class="badge bg-secondary">Currently unavailable</span></p>
          <% } %>
        <% } %>
      </div>
    </div>
  <% } else { %>
    <p>No product found.</p>
  <% } %>
</div>
```

2) **Supporting CSS in `public/css/style.css`:**

```css
.product-detail-wrapper{
  max-width:980px;
}
.product-detail-card{
  background:#fff;
  border-radius:22px;
  padding:2.5rem 2.75rem;
  box-shadow:0 28px 70px rgba(15,23,42,0.12);
  display:grid;
  grid-template-columns:minmax(0,1.05fr) minmax(0,1.2fr);
  gap:2.5rem;
}
.product-detail-image-wrap{
  background:#f5ede4;
  border-radius:18px;
  padding:2.3rem 1.8rem;
  display:flex;
  align-items:center;
  justify-content:center;
}
.product-detail-stock-pill{
  display:inline-flex;
  padding:4px 10px;
  border-radius:999px;
  font-size:0.78rem;
  background:#ecfdf3;
  color:#166534;
}
.product-detail-stock-pill.is-out{
  background:#fef2f2;
  color:#b91c1c;
}
```

RESULTS
The product detail page now looks like a proper product sheet, and the role- and stock-based logic for add-to-cart continues to function correctly.


====================================================================
Task 3 – Order Detail Page Layout (views/order_detail.ejs, style.css)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to redesign the order detail page into a structured card with clear sections (summary, payment/shipping, delivery details, items, history) while preserving all fields and logic.

GOAL(S)
• Improve readability of order information.
• Keep all dynamic data: order id, timestamps, totals, delivery info, items, history.

PREPARATION WORK(S)
• Opened `views/order_detail.ejs` to see current content.
• Identified properties used: `order.id`, `order.createdAt`, `order.total`, `order.delivery`, `order.items`, `order.history`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/order_detail.ejs`
• `public/css/style.css`

PROMPT(S) USED
• "Can you also make the order page look nicer and fancy and more structured." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **New layout in `views/order_detail.ejs`:**

```ejs
<div class="container mt-5 mb-5 order-detail-wrapper">
  <div class="order-detail-card">
    <header class="order-detail-header">
      <div>
        <p class="order-detail-kicker">Order summary</p>
        <h1 class="order-detail-title">Order #<%= order.id %></h1>
        <p class="order-detail-meta">Placed on <%= new Date(order.createdAt).toLocaleString() %></p>
      </div>
      <div class="order-detail-total-block">
        <span class="order-detail-total-label">Total</span>
        <span class="order-detail-total-amount">$<%= Number(order.total || (order.subtotal + order.deliveryCost)).toFixed(2) %></span>
      </div>
    </header>

    <section class="order-detail-main">
      <div class="order-detail-left">
        <div class="order-detail-info-group">
          <h2 class="order-detail-section-title">Payment & shipping</h2>
          <dl class="order-detail-def-list">
            <!-- Payment, delivery option, estimated delivery, status, refund -->
          </dl>
        </div>

        <% if (order.delivery) { %>
          <div class="order-detail-info-group">
            <h2 class="order-detail-section-title">Delivery details</h2>
            <p class="order-detail-address">
              <strong><%= order.delivery.fullName %></strong><br>
              <%= order.delivery.street %><% if (order.delivery.unit) { %>, #<%= order.delivery.unit %><% } %><br>
              <%= order.delivery.postalCode %>
            </p>
          </div>
        <% } %>
      </div>

      <div class="order-detail-right">
        <h2 class="order-detail-section-title">Items</h2>
        <ul class="order-detail-items-list">
          <% (order.items || []).forEach(function(item){ %>
            <li class="order-detail-item-row">
              <div class="order-detail-item-main">
                <div class="order-detail-item-name"><%= item.productName %></div>
                <div class="order-detail-item-meta">Qty <%= item.quantity %> · $<%= Number(item.price).toFixed(2) %> each</div>
              </div>
              <div class="order-detail-item-total">$<%= (Number(item.price) * Number(item.quantity)).toFixed(2) %></div>
            </li>
          <% }) %>
        </ul>
      </div>
    </section>
  </div>
</div>
```

2) **Supporting CSS in `public/css/style.css`:**

```css
.order-detail-wrapper{
  max-width:1040px;
}
.order-detail-card{
  background:#ffffff;
  border-radius:24px;
  padding:2.5rem 2.8rem 2.4rem 2.8rem;
  box-shadow:0 26px 70px rgba(15,23,42,0.12);
}
.order-detail-main{
  display:grid;
  grid-template-columns:minmax(0,1.1fr) minmax(0,1.05fr);
  gap:2.25rem;
}
.order-detail-items-list{
  list-style:none;
  padding:0;
  margin:0;
  border-radius:18px;
  overflow:hidden;
  border:1px solid #e5e7eb;
}
.order-detail-item-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0.9rem 1.1rem;
  background:#f9fafb;
}
```

RESULTS
The order page is now much more structured and readable, similar to real e-commerce order summaries, and still shows all order data correctly.


====================================================================
Task 4 – Help Center Page Layout (views/help_center.ejs, style.css)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to redesign the help center page for delivery address changes and refund requests into a branded hero + support cards layout, keeping all forms and modal logic the same.

GOAL(S)
• Add a hero section to explain the Help Center.
• Turn the two forms into consistent, styled cards.
• Keep form actions `/help-center/address-change` and `/help-center/refund` unchanged.

PREPARATION WORK(S)
• Opened `views/help_center.ejs` and understood the existing forms and refund confirmation modal.
• Checked CSS file to add a dedicated Help Center section.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/help_center.ejs`
• `public/css/style.css`

PROMPT(S) USED
• "Can you also make the help center page look fancy and nice too, add some pictures if needed and make it look nice." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **New Help Center layout in `views/help_center.ejs`:**

```ejs
<div class="container mt-5 mb-5 help-center-wrapper">
  <section class="help-center-hero mb-4">
    <div class="help-center-hero-text">
      <p class="help-center-kicker">Need a hand?</p>
      <h1 class="help-center-title">Help Center</h1>
      <p class="help-center-copy">Update your delivery details or request a refund in just a few steps.</p>
    </div>
    <div class="help-center-hero-visual" aria-hidden="true"></div>
  </section>

  <p class="help-center-subcopy">Submit requests to change delivery address or ask for a refund.</p>

  <div class="row g-4 help-center-grid">
    <div class="col-md-6">
      <div class="help-card h-100">
        <div class="help-card-body">
          <h2 class="help-card-title">Change delivery address</h2>
          <!-- address change form -->
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="help-card h-100">
        <div class="help-card-body">
          <h2 class="help-card-title">Request a refund / cancel</h2>
          <!-- refund form with checkbox + modal trigger -->
        </div>
      </div>
    </div>
  </div>
</div>
```

2) **Supporting CSS in `public/css/style.css`:**

```css
.help-center-wrapper{
  max-width:1040px;
}
.help-center-hero{
  background:linear-gradient(120deg,#f5eee5,#f1f5f9);
  border-radius:24px;
  padding:2.4rem 2.6rem;
  display:grid;
  grid-template-columns:minmax(0,1.35fr) minmax(0,0.9fr);
  gap:2rem;
  box-shadow:0 22px 60px rgba(15,23,42,0.12);
}
.help-card{
  border-radius:18px;
  background:#ffffff;
  border:1px solid #e5e7eb;
  box-shadow:0 18px 45px rgba(15,23,42,0.08);
  padding:1.8rem 1.7rem 1.7rem 1.7rem;
}
.help-primary-btn, .help-secondary-btn{
  border-radius:999px;
  padding:0.55rem 1.7rem;
  font-size:0.86rem;
  letter-spacing:0.12em;
  text-transform:uppercase;
}
```

RESULTS
The help center now has a hero banner and tidy support cards, and the original backend form handling still works.


====================================================================
Task 5 – Shopping Search & Clear Fix (views/shopping.ejs)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to debug and fix the client-side search and Clear button behavior on the Shopping page so they work with the updated product card layout.

GOAL(S)
• Make search filter items by product name.
• Ensure Clear resets search, restores all cards, and clears category filter.

PREPARATION WORK(S)
• Reviewed the existing search JS at the bottom of `shopping.ejs`.
• Noticed that it called `card.closest('.col-6, .col-md-4, .col-lg-3')`, but cards are not wrapped in those grid classes.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/shopping.ejs`

PROMPT(S) USED
• "Right now the search function and clear button the shopping page does not work can u fix it too." 
• "You fix it." 

AI RESPONSES/CODE GENERATED (FINAL FUNCTION)

```js
// simple client-side search (filters visible cards)
(function(){
  const search = document.getElementById('searchBox');
  const grid = document.getElementById('productsGrid');
  if (!search || !grid) return;

  const items = Array.from(grid.querySelectorAll('.product-card'));

  function doFilter(){
    const q = (search.value || '').toLowerCase().trim();
    items.forEach(function(card){
      const titleEl = card.querySelector('.card-title');
      const title = titleEl ? titleEl.textContent : '';
      card.style.display = title.toLowerCase().includes(q) ? '' : 'none';
    });
  }

  search.addEventListener('input', doFilter);

  const clearBtn = document.getElementById('clearSearch');
  if (clearBtn) {
    clearBtn.addEventListener('click', function(){
      search.value = '';
      items.forEach(function(card){ card.style.display = ''; });
      // also reset any category filter by navigating back to base shopping
      window.location.href = '/shopping';
    });
  }
})();
```

RESULTS
Search and Clear now work properly: searching filters visible product cards, and Clear resets both the search and the category filter.


====================================================================
Task 6 – Git & GitHub Setup and Workflow
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to guide me through initializing Git, connecting to GitHub (`nn200B/fa-ga-skincare`), resolving non-fast-forward/unrelated history issues, and establishing a safe workflow for pushes and pulls.

GOAL(S)
• Initialize a local Git repo and push it to GitHub.
• Resolve errors like non-fast-forward, unrelated histories, index.lock, and stuck rebases.
• Understand how to pull teammates' changes and push my own.

PREPARATION WORK(S)
• Created an empty repository on GitHub: `https://github.com/nn200B/fa-ga-skincare`.
• Opened a PowerShell terminal in the project root.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• Entire project (Git history, `.git` folder).

PROMPT(S) USED
• "Guide me step by step to upload my project to GitHub."
• Follow-up prompts about errors: non-fast-forward, refusing to merge unrelated histories, index.lock, rebase-merge deletion.

AI RESPONSES/CODE GENERATED (KEY COMMANDS)

```powershell
cd "C:\Users\nickn\OneDrive - Republic Polytechnic\2425 S1\C372 Payment tech\CA1 C372 TEAM FA\FA GA SKINCARE"

git init
git add .
git commit -m "Initial commit: FA GA Skincare app"
git remote add origin https://github.com/nn200B/fa-ga-skincare.git
git branch -M main
git push -u origin main
```

When I hit errors, AI suggested:

```powershell
# fix unrelated histories
git pull --allow-unrelated-histories origin main

# remove stale locks and rebase-merge dirs
del ".git\index.lock"
rmdir ".git\rebase-merge" -Recurse -Force

# abort stuck operations
git rebase --abort
git merge --abort

# final force push once to make remote match local
git push -u origin main --force
```

And for normal daily work:

```powershell
# get teammates' changes
git pull

# save my work
git add .
git commit -m "Describe change"
git push
```

RESULTS
The repository is now correctly hosted on GitHub at `nn200B/fa-ga-skincare`. I can push my changes and my teammates can pull them. I understand when to use `git pull`, regular `git push`, and why `--force` should be used only in exceptional cleanup cases.


====================================================================
Reflection on the use of GenAI (Views, Search, Git)
====================================================================
For the views and styling, AI acted like a design partner: it generated hero layouts, card designs, and responsive CSS based on my requirements and reference image. I kept control over the data and routes, making sure that all variables and form actions stayed the same.

For the search fix, AI helped debug why my original DOM selectors no longer worked, and proposed a more robust solution that directly toggles each card's `display` style.

For Git and GitHub, AI explained error messages and gave me exact commands to resolve them, which helped me understand the difference between local history, remote history, and when to use pull, merge, or rebase.

Overall, I used GenAI not just to "write code for me" but to speed up layout work, troubleshoot problems, and understand tools (like Git) more deeply, while I remained responsible for reviewing, testing, and deciding what to keep.


====================================================================
Task 7 – Notifications List Page (views/notifications.ejs)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to design a simple, clear notifications page where users can see messages about their orders, refunds, and address change requests.

GOAL(S)
• Present notifications in a clean list with timestamps.
• Highlight unread notifications with a badge.
• Keep existing `notifications` data structure coming from the server.

PREPARATION WORK(S)
• Opened `views/notifications.ejs` and checked variables: `notifications`, `errors`, `success`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/notifications.ejs`

PROMPT(S) USED
• "Make a simple but nice notifications page where users can see their order and refund updates." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

```ejs
<div class="container mt-4 mb-5">
  <h2 class="mb-3">Notifications</h2>
  <p class="text-muted mb-4">See updates related to your orders and requests.</p>

  <% if (typeof errors !== 'undefined' && errors.length) { %>
    <div class="alert alert-danger">
      <ul class="mb-0">
        <% errors.forEach(function(e){ %>
          <li><%= e %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>
  <% if (typeof success !== 'undefined' && success.length) { %>
    <div class="alert alert-success">
      <ul class="mb-0">
        <% success.forEach(function(m){ %>
          <li><%= m %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <div class="list-group">
    <% if (!notifications || !notifications.length) { %>
      <div class="list-group-item text-muted">No notifications yet.</div>
    <% } else { %>
      <% notifications.forEach(function(n){ %>
        <a href="<%= n.link || '#' %>?notif=<%= n.id %>" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
          <div class="me-auto">
            <div class="fw-semibold"><%= n.message %></div>
            <small class="text-muted"><%= new Date(n.createdAt).toLocaleString('en-SG',{dateStyle:'short', timeStyle:'short'}) %></small>
          </div>
          <% if (!n.read) { %>
            <span class="badge bg-primary rounded-pill">New</span>
          <% } %>
        </a>
      <% }) %>
    <% } %>
  </div>
</div>
```

RESULTS
The notifications page shows a consistent list of notifications with clear timestamps and a "New" badge for unread items, making it easier for users to see updates.


====================================================================
Task 8 – Admin Categories Management (views/categories.ejs)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to structure an admin view that lets administrators see categories, add new ones, and see products grouped by category.

GOAL(S)
• Provide a simple form to add a category.
• Show each category with the number of products.
• Provide a delete button for categories.

PREPARATION WORK(S)
• Opened `views/categories.ejs` and confirmed variables: `groupedCategories`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/categories.ejs`

PROMPT(S) USED
• "Design an admin categories overview page with an add category form and grouped products." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

```ejs
<div class="container mt-4">
  <h2 class="mb-4">Admin Categories Overview</h2>

  <div class="row mb-4">
    <div class="col-md-6">
      <form action="/admin/categories" method="POST" class="mb-3" style="max-width:480px">
        <div class="input-group">
          <input name="name" class="form-control" placeholder="New category name" required>
          <button class="btn btn-primary" type="submit">Add Category</button>
        </div>
      </form>
    </div>
  </div>

  <% if (Array.isArray(groupedCategories) && groupedCategories.length > 0) { %>
    <% groupedCategories.forEach(function(group){ %>
      <div class="card mb-3">
        <div class="card-header d-flex justify-content-between align-items-center">
          <div>
            <strong><%= group.category.name %></strong>
            <span class="badge bg-secondary ms-2"><%= (group.products || []).length %> product(s)</span>
          </div>
          <form action="/admin/categories/<%= group.category.id %>/delete" method="POST" onsubmit="return confirm('Delete this category? This will not remove products but they will appear uncategorised.');">
            <button class="btn btn-sm btn-outline-danger">Delete Category</button>
          </form>
        </div>
        <div class="card-body p-0">
          <% if ((group.products || []).length === 0) { %>
            <p class="m-3 text-muted small">No products assigned to this category yet.</p>
          <% } else { %>
            <div class="table-responsive">
              <table class="table table-sm mb-0">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th class="text-end">Price</th>
                    <th class="text-end">Stock</th>
                    <th class="text-end">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% group.products.forEach(function(p){ %>
                    <tr>
                      <td><%= p.productName %></td>
                      <td class="text-end">$<%= Number(p.price).toFixed(2) %></td>
                      <td class="text-end"><%= p.quantity %></td>
                      <td class="text-end">
                        <a class="btn btn-sm btn-outline-primary" href="/updateProduct/<%= p.id %>">Edit</a>
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          <% } %>
        </div>
      </div>
    <% }) %>
  <% } else { %>
    <p class="text-muted">No categories found yet.</p>
  <% } %>
</div>
```

RESULTS
Admins can now see all categories, the number of products in each, add new categories, and delete categories using a simple interface.


====================================================================
Task 9 – User Category Browsing Page (views/categories_user.ejs)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to design a user-facing categories page so shoppers can pick a category and jump directly to filtered products.

GOAL(S)
• Show all categories as cards.
• Link each category to `/shopping?category=...`.

PREPARATION WORK(S)
• Opened `views/categories_user.ejs` and checked `categories` data.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/categories_user.ejs`

PROMPT(S) USED
• "Create a simple categories page for users that links to the shopping page using the category name." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

```ejs
<div class="container mt-4">
  <h2 class="mb-4">Categories</h2>
  <p class="text-muted small">Select a category to browse products.</p>

  <div class="row">
    <% (typeof categories !== 'undefined' ? categories : []).forEach(function(c){ %>
      <div class="col-6 col-md-4 col-lg-3 mb-3">
        <a href="/shopping?category=<%= encodeURIComponent(c.name) %>" class="card text-decoration-none text-dark h-100">
          <div class="card-body d-flex align-items-center justify-content-center">
            <h5 class="mb-0"><%= c.name %></h5>
          </div>
        </a>
      </div>
    <% }) %>
  </div>

  <div class="mt-3">
    <a href="/shopping" class="btn btn-outline-secondary">Back to Shop</a>
  </div>
</div>
```

RESULTS
Users can now see all categories and tap one to go to the shopping page already filtered by that category.


====================================================================
Task 10 – Admin Sales Dashboard (views/admin_sales.ejs)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to design an admin sales dashboard that summarises paid orders by month and period (this month, last month, YTD, etc.).

GOAL(S)
• Provide a period filter form.
• Show total revenue and number of paid orders.
• Show a monthly breakdown table and a detailed orders table.

PREPARATION WORK(S)
• Opened `views/admin_sales.ejs` and identified variables: `mode`, `selectedMonth`, `monthlySummary`, `orders`, `selectedSummary`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/admin_sales.ejs`

PROMPT(S) USED
• "Create a simple sales dashboard for admin showing monthly revenue and the count of paid orders with filters like this month, last month, YTD, custom month." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

```ejs
<div class="container mt-4">
  <h2 class="mb-3">Sales Dashboard</h2>
  <p class="text-muted mb-4">View monthly revenue and number of paid orders.</p>

  <form class="row g-3 align-items-end mb-4" method="GET" action="/admin/sales">
    <div class="col-sm-4 col-md-3">
      <label for="mode" class="form-label small fw-semibold">Period</label>
      <select id="mode" name="mode" class="form-select">
        <option value="all" <%= (mode === 'all' ? 'selected' : '') %>>All time</option>
        <option value="this-month" <%= (mode === 'this-month' ? 'selected' : '') %>>This month</option>
        <option value="last-month" <%= (mode === 'last-month' ? 'selected' : '') %>>Last month</option>
        <option value="ytd" <%= (mode === 'ytd' ? 'selected' : '') %>>Year to date (YTD)</option>
        <option value="this-year" <%= (mode === 'this-year' ? 'selected' : '') %>>This year</option>
        <option value="custom" <%= (mode === 'custom' ? 'selected' : '') %>>Custom month</option>
      </select>
    </div>
    <div class="col-sm-4 col-md-3">
      <label for="month" class="form-label small fw-semibold">Custom month</label>
      <select id="month" name="month" class="form-select">
        <option value="">Choose month</option>
        <!-- month options using selectedMonth -->
      </select>
      <div class="form-text small">Used only when "Custom month" is selected.</div>
    </div>
    <div class="col-sm-4 col-md-2 d-flex align-items-end">
      <button class="btn btn-primary w-100" type="submit">Apply</button>
    </div>
  </form>

  <!-- cards with totalRevenue and totalOrders -->
  <!-- monthlySummary table and orders table -->
</div>
```

RESULTS
Admins can see sales totals and a monthly breakdown, and filter the orders list by time period, which helps analyse performance.


====================================================================
Task 11 – Order Invoice / Print Page (views/order_detail.ejs, views/invoice.ejs, app.js)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to add an invoice feature so that users can open a printable invoice for a specific order and then return back to the orders page.

GOAL(S)
• Add an "Invoice / Print" button on the order detail page.
• Create a print-friendly invoice page showing line items and totals.
• Add a secure route that only the order owner (or admin) can access.

PREPARATION WORK(S)
• Opened `views/order_detail.ejs` to see the existing order summary layout.
• Created `views/invoice.ejs` for the invoice.
• Updated `app.js` to add `/orders/:id/invoice` route and reuse `inMemory.orders` with user checks.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/order_detail.ejs`
• `views/invoice.ejs`
• `app.js`

PROMPT(S) USED
• "Can you add an invoice button for the orders so that it can print invoice of the order and then able to return back to orders page." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **Button on order detail page (`views/order_detail.ejs`):**

```ejs
<footer class="order-detail-footer d-flex justify-content-between align-items-center flex-wrap gap-2">
  <a href="/orders" class="btn btn-outline-dark order-detail-back-btn">Back to orders</a>
  <a href="/orders/<%= order.id %>/invoice" class="btn btn-dark">Invoice / Print</a>
</footer>
```

2) **Invoice view (`views/invoice.ejs`):**

```ejs
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Invoice #<%= order.id %> - GlowAura Skincare</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    @media print {
      .no-print { display: none !important; }
      body { background: #ffffff !important; }
    }
    .invoice-wrapper { max-width: 800px; margin: 2rem auto; background: #fff; padding: 2rem 2.25rem; border-radius: 18px; }
    /* additional layout styles */
  </style>
</head>
<body>
  <div class="invoice-wrapper">
    <!-- header, order summary, items table with totals -->
    <div class="invoice-actions no-print">
      <button class="btn btn-outline-dark" onclick="window.location.href='/orders'">Back to orders</button>
      <button class="btn btn-dark" onclick="window.print()">Print invoice</button>
    </div>
  </div>
</body>
</html>
```

3) **Route in `app.js`:**

```js
app.get('/orders/:id/invoice', checkAuthenticated, (req, res) => {
  const id = req.params.id;
  const uid = getUserIdFromSessionUser(req.session.user);
  const o = (inMemory.orders || []).find(x => String(x.id) === String(id));
  if (!o) {
    req.flash('error', 'Order not found.');
    return res.redirect('/orders');
  }
  if (String(o.userId) !== String(uid) && !(req.session.user && req.session.user.role === 'admin')) {
    req.flash('error', 'You are not allowed to view this invoice.');
    return res.redirect('/orders');
  }
  o.estimatedDelivery = estimateDeliveryDate(o.createdAt, o.deliveryOption);
  res.render('invoice', { order: o, user: req.session.user });
});
```

RESULTS
Users can now open a dedicated invoice view for each order, print it using the browser’s print dialog, and then return easily to the orders list. The route checks ownership so only the correct user or an admin can view a given invoice.


====================================================================
Task 12 – Admin Product Inventory & Buttons (views/inventory.ejs, views/addProduct.ejs, views/editProduct.ejs, app.js)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to clearly design and document the admin product management flow: viewing all products, adding new products, editing existing ones, and deleting products through buttons and forms.

GOAL(S)
• Provide an inventory table for admins showing product name, image, quantity, price.
• Add buttons/links for "Add New Product", "Edit", and "Delete".
• Keep all routes wired to the existing backend logic in `app.js` and controllers.

PREPARATION WORK(S)
• Opened `views/inventory.ejs`, `views/addProduct.ejs`, and `views/editProduct.ejs`.
• Checked the routes in `app.js` for `/inventory`, `/addProduct`, `/updateProduct/:id`, and `/deleteProduct/:id`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/inventory.ejs`
• `views/addProduct.ejs`
• `views/editProduct.ejs`
• `app.js`

PROMPT(S) USED
• "Make the admin inventory page nicer and make sure there are buttons for add product, edit, and delete that use my existing routes." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **Admin inventory table with Edit/Delete and Add Product button (`views/inventory.ejs`):**

```ejs
<div class="d-flex justify-content-between align-items-center">
  <div class="text-center flex-grow-1"><h2>GlowAura Skincare Product Inventory</h2></div>
  <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
    <div class="ms-3">
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addProductModal">Add New Product</button>
    </div>
  <% } %>
</div>

<table class="table table-hover small text-center">
  <thead>
    <tr>
      <th>Product Name</th>
      <th>Product Image</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <% for(let i=0; i < products.length; i++) { %>
      <tr>
        <td><a href="/product/<%= products[i].id %>"><%= products[i].productName %></a></td>
        <td><img src="images/<%= products[i].image %>" width="20%"></td>
        <td><span class="fw-semibold"><%= products[i].quantity %></span></td>
        <td>$<%= (Number(products[i].price) || 0).toFixed(2) %></td>
        <td><a href="/updateProduct/<%= products[i].id %>">Edit</a></td>
        <td><a href="/deleteProduct/<%= products[i].id %>" onclick="return confirm('Are you sure you want to delete this product?')">Delete</a></td>
      </tr>
    <% } %>
  </tbody>
  </table>

<!-- Add Product modal uses the same form partial as /addProduct page -->
<div class="modal fade" id="addProductModal" ...>
  <%- include('partials/addProductForm', { categories: (typeof categories !== 'undefined' ? categories : []) }) %>
</div>
```

2) **Standalone Add Product page (`views/addProduct.ejs`):**

```ejs
<div class="container mt-4">
  <h2 class="text-center mb-4">Add New Product</h2>
  <div class="mx-auto" style="max-width:700px;">
    <%- include('partials/addProductForm', { categories: categories }) %>
  </div>
</div>
```

3) **Edit Product page (`views/editProduct.ejs` / `views/updateProduct.ejs`):**

```ejs
<form action="/updateProduct/<%= product.id %>" method="POST" enctype="multipart/form-data">
  <!-- name, quantity, price, category, image fields -->
  <div class="d-grid gap-2">
    <button type="submit" class="btn btn-primary">Update Product</button>
    <a class="btn btn-secondary" href="/inventory">Back</a>
  </div>
</form>
```

4) **Routes in `app.js` (already wired, AI helped explain):**

```js
app.get('/addProduct', checkAuthenticated, checkAdmin, ...);
app.post('/addProduct', checkAuthenticated, checkAdmin, upload.single('image'), ...);
app.get('/updateProduct/:id', checkAuthenticated, checkAdmin, ...);
app.post('/updateProduct/:id', checkAuthenticated, checkAdmin, upload.single('image'), ...);
app.get('/deleteProduct/:id', checkAuthenticated, checkAdmin, ...);
```

RESULTS
Admins have a clear inventory table with Edit/Delete links and a button to open an "Add New Product" modal or page. All buttons are connected to the correct backend routes so product CRUD works end to end.


====================================================================
Task 13 – Shopping Cart Page & Buttons (views/cart.ejs, controllers/CartController.js, app.js)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to refine and document the shopping cart page, including the UI for delete buttons, select-all checkbox, proceed-with-selected button, and clear-cart button, all wired to cart controller routes.

GOAL(S)
• Show all cart items in a table with product, image, price, quantity, and line total.
• Add a delete button per row with a confirmation modal.
• Add select-all and proceed-with-selected behaviour.
• Provide a clear-cart button.

PREPARATION WORK(S)
• Opened `views/cart.ejs` and `controllers/CartController.js`.
• Checked routes in `app.js` for `/cart`, `/cart/delete/:id`, `/cart/clear`, and `/cart/selection`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/cart.ejs`
• `controllers/CartController.js`
• `app.js`

PROMPT(S) USED
• "Help me make the cart page nicer with delete buttons, modal confirmation, select-all, and proceed-with-selected, using my existing cart controller." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **Cart table and buttons (`views/cart.ejs`):**

```ejs
<table id="cartTable" class="table table-bordered align-middle">
  <thead>
    <tr>
      <th style="width:48px;">
        <div class="form-check m-0">
          <input type="checkbox" id="selectAll" class="form-check-input">
          <label for="selectAll" class="form-check-label small">All</label>
        </div>
      </th>
      <th>Product</th>
      <th>Image</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% let total = 0; %>
    <% for (let i = 0; i < cart.length; i++) { const item = cart[i]; const pid = item.productId; const line = Number(item.price || 0) * Number(item.quantity || 0); %>
      <tr data-pid="<%= pid %>">
        <td><input type="checkbox" name="selected" value="<%= pid %>" class="form-check-input item-checkbox"></td>
        <td><%= item.productName %></td>
        <td><% if (item.image) { %><img src="/images/<%= item.image %>" width="80" class="img-thumbnail" alt="product image"><% } %></td>
        <td>$<%= Number(item.price || 0).toFixed(2) %></td>
        <td><%= item.quantity %></td>
        <td class="line-amount">$<%= line.toFixed(2) %></td>
        <td>
          <button type="button" class="btn btn-danger btn-sm delete-btn"
            data-pid="<%= pid %>"
            data-pname="<%= (item.productName || '').replace(/\"/g, '&quot;') %>"
            data-line="<%= line.toFixed(2) %>">
            Delete
          </button>
        </td>
      </tr>
      <% total += line; %>
    <% } %>
  </tbody>
</table>

<h4>Total: $<%= total.toFixed(2) %></h4>
<div class="mt-4 d-flex flex-wrap align-items-center gap-2">
  <a href="/shopping" class="btn btn-secondary">Back to Shopping</a>
  <button id="proceedSelectedBtn" type="button" class="btn btn-primary">Proceed with selected</button>
  <form id="clearCartForm" action="/cart/clear" method="POST" class="ms-auto">
    <button type="submit" class="btn btn-outline-danger">Clear cart</button>
  </form>
</div>
```

2) **Delete confirmation modal and JS (`views/cart.ejs`):**

```js
function openConfirmModal(productId, productName, lineAmount) {
  deleteTargetPid = String(productId);
  deleteTargetLine = Number(lineAmount || 0);
  document.getElementById('modalBodyText').textContent =
    'Are you sure you want to remove "' + productName + '" from your cart?';
  if (!deleteModal) {
    deleteModal = new bootstrap.Modal(document.getElementById('confirmDeleteModal'));
    document.getElementById('confirmDeleteBtn').addEventListener('click', doDelete);
  }
  deleteModal.show();
}

async function doDelete() {
  const resp = await fetch('/cart/delete/' + encodeURIComponent(deleteTargetPid), { method: 'DELETE', headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' }, credentials: 'same-origin' });
  const data = await resp.json();
  if (data && data.success) {
    // remove row, update total, show empty message if needed
  }
}
```

3) **Select-all and proceed-with-selected JS:**

```js
document.addEventListener('DOMContentLoaded', function(){
  const selectAll = document.getElementById('selectAll');
  const itemCheckboxes = Array.from(document.querySelectorAll('.item-checkbox'));
  if (selectAll && itemCheckboxes.length) {
    selectAll.addEventListener('change', function(){
      itemCheckboxes.forEach(cb => { cb.checked = selectAll.checked; });
    });
    itemCheckboxes.forEach(cb => {
      cb.addEventListener('change', function(){
        if (!cb.checked) selectAll.checked = false;
        else if (itemCheckboxes.every(x => x.checked)) selectAll.checked = true;
      });
    });
  }

  const proceedBtn = document.getElementById('proceedSelectedBtn');
  const form = document.getElementById('cartCheckoutForm');
  if (proceedBtn && form) {
    proceedBtn.addEventListener('click', function(){
      const checked = form.querySelectorAll('.item-checkbox:checked');
      if (!checked.length) {
        showToast('Please select item(s) to check out.', 'Error', 'danger');
        return;
      }
      form.submit();
    });
  }
});
```

RESULTS
The shopping cart page now has clear controls for users: delete with confirmation modal, select-all checkbox, proceed-with-selected button, and a clear-cart button, all backed by the existing cart controller routes and session logic.


====================================================================
Task 14 – Help Center Forms & Functions (views/help_center.ejs, app.js)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to design and document all Help Center functions: the delivery address change form, the refund/cancellation request form, and the confirmation modal, making sure they still post to the correct backend routes.

GOAL(S)
• Provide a clear UI for users to change delivery address for an order.
• Provide a clear UI for users to request a refund/cancellation.
• Keep all existing form actions and server-side variables working.

PREPARATION WORK(S)
• Opened `views/help_center.ejs` to see the two forms and the Bootstrap modal.
• Checked routes in `app.js` handling `/help-center`, `/help-center/address-change`, and `/help-center/refund`.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/help_center.ejs`
• `app.js`

PROMPT(S) USED
• "Can you also make the help center page look fancy and nice too, add some pictures if needed and make it look nice, but keep the delivery address change and refund functions working." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

1) **Help Center layout with two function cards (`views/help_center.ejs`):**

```ejs
<div class="container mt-5 mb-5 help-center-wrapper">
  <section class="help-center-hero mb-4">
    <div class="help-center-hero-text">
      <p class="help-center-kicker">Need a hand?</p>
      <h1 class="help-center-title">Help Center</h1>
      <p class="help-center-copy">Update your delivery details or request a refund in just a few steps.</p>
    </div>
    <div class="help-center-hero-visual" aria-hidden="true"></div>
  </section>

  <p class="help-center-subcopy">Submit requests to change delivery address or ask for a refund.</p>

  <div class="row g-4 help-center-grid">
    <div class="col-md-6">
      <div class="help-card h-100">
        <div class="help-card-body">
          <h2 class="help-card-title">Change delivery address</h2>
          <!-- address change form -->
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="help-card h-100">
        <div class="help-card-body">
          <h2 class="help-card-title">Request a refund / cancel</h2>
          <!-- refund form with checkbox + modal trigger -->
        </div>
      </div>
    </div>
  </div>
</div>
```

2) **Delivery address change form (inside first help card):**

```ejs
<form action="/help-center/address-change" method="POST" class="mt-3">
  <div class="mb-3">
    <label class="form-label small fw-semibold">Order</label>
    <select name="orderId" class="form-select" required>
      <option value="">Select an order</option>
      <% (eligibleAddressOrders || []).forEach(function(o){ %>
        <option value="<%= o.id %>">#<%= o.id %> · <%= new Date(o.createdAt).toLocaleDateString() %> · $<%= Number(o.total || o.subtotal).toFixed(2) %></option>
      <% }) %>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label small fw-semibold">New delivery address</label>
    <textarea name="newAddress" class="form-control" rows="3" required></textarea>
  </div>
  <div class="mb-3">
    <label class="form-label small fw-semibold">Reason (optional)</label>
    <textarea name="reason" class="form-control" rows="2"></textarea>
  </div>
  <button type="submit" class="btn btn-dark help-primary-btn">Submit request</button>
</form>
```

3) **Refund / cancel request form and confirmation modal trigger:**

```ejs
<form id="refundForm" action="/help-center/refund" method="POST" class="mt-3">
  <div class="mb-3">
    <label class="form-label small fw-semibold">Order</label>
    <select name="orderId" class="form-select" required>
      <option value="">Select an order</option>
      <% (refundableOrders || []).forEach(function(o){ %>
        <option value="<%= o.id %>">#<%= o.id %> · <%= new Date(o.createdAt).toLocaleDateString() %> · $<%= Number(o.total || o.subtotal).toFixed(2) %></option>
      <% }) %>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label small fw-semibold">Reason for refund / cancel</label>
    <textarea name="reason" class="form-control" rows="3" required></textarea>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" value="1" id="confirmPolicy" required>
    <label class="form-check-label small" for="confirmPolicy">
      I understand that my refund request is subject to review.
    </label>
  </div>
  <button type="button" class="btn btn-outline-dark help-secondary-btn" data-bs-toggle="modal" data-bs-target="#confirmRefundModal">Submit request</button>
</form>

<!-- Modal -->
<div class="modal fade" id="confirmRefundModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm refund request</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to submit this refund / cancellation request?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-dark" onclick="document.getElementById('refundForm').submit();">Yes, submit</button>
      </div>
    </div>
  </div>
  </div>
```

4) **Routes in `app.js` that these forms use (AI helped me verify, not rewrite):**

```js
app.get('/help-center', checkAuthenticated, (req, res) => { /* loads eligibleAddressOrders, refundableOrders */ });
app.post('/help-center/address-change', checkAuthenticated, (req, res) => { /* addAddressChangeRequest, addNotification */ });
app.post('/help-center/refund', checkAuthenticated, (req, res) => { /* addRefundRequest, addNotification */ });
```

RESULTS
The Help Center page now looks polished and still fully supports its two main functions: changing delivery address and submitting refund/cancellation requests. Both forms send data to the correct backend routes, and the modal adds an extra confirmation step for refund requests.


====================================================================
Task 15 – Login & Register Pages (views/login.ejs, views/register.ejs, UserController.js)
====================================================================
Date Started (DD/MM/YYYY): 11/12/2025
Date Updated (DD/MM/YYYY): 11/12/2025
Status: Completed

OBJECTIVE
Use AI to refine the login and register pages so they look consistent with the GlowAura design and work correctly with the existing authentication logic in `UserController.js`.

GOAL(S)
• Provide simple, clear forms for login and registration.
• Display server-side error/success messages using flash messages.
• Ensure successful login redirects normal users to `/shopping` and admins to `/inventory`.

PREPARATION WORK(S)
• Opened `views/login.ejs` and checked that the form posts to `/login` with `email` and `password` fields.
• Opened `views/register.ejs` and confirmed it posts to `/register` with `username`, `email`, `password`, `address`, `contact`, and `role`.
• Reviewed `UserController.js` to see how credentials are validated and how roles are used for redirects.

AI TOOL(S) USED
• GitHub Copilot Chat.

RELEVANT SOURCE CODE FILE(S)
• `views/login.ejs`
• `views/register.ejs`
• `controllers/UserController.js`

PROMPT(S) USED
• "Make the login and register pages look nicer and make sure they still work with my existing UserController." 

AI RESPONSES/CODE GENERATED (KEY OUTPUT)

```ejs
<!-- Example login layout in views/login.ejs -->
<div class="container mt-5 mb-5" style="max-width:420px;">
  <h2 class="mb-3 text-center">Sign in to GlowAura</h2>

  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>
  <% if (typeof success !== 'undefined' && success) { %>
    <div class="alert alert-success"><%= success %></div>
  <% } %>

  <form action="/login" method="POST">
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" name="password" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-dark w-100 mt-2">Login</button>
  </form>
</div>
```

```ejs
<!-- Example register layout in views/register.ejs -->
<div class="container mt-5 mb-5" style="max-width:520px;">
  <h2 class="mb-3 text-center">Create GlowAura account</h2>

  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <form action="/register" method="POST">
    <div class="mb-3">
      <label class="form-label">Username</label>
      <input type="text" name="username" class="form-control" required>
    </div>
    <!-- other fields wired to UserController.register (email, password, address, contact, role) -->
    <button type="submit" class="btn btn-dark w-100 mt-2">Register</button>
  </form>
</div>
```

4) **Biometric-style face scan gate on registration (`views/register.ejs`) with camera preview:**

```ejs
<!-- Biometric verification block (face scan mimic with camera) -->
<div class="mb-3 mt-4">
  <label class="form-label d-flex justify-content-between align-items-center">
    <span>Biometric verification (face scan)</span>
    <span class="small text-muted" id="bio-status-label">Not verified</span>
  </label>
  <div class="border rounded-3 p-3 d-flex flex-column align-items-center justify-content-center" style="background:#020617;color:#e5e7eb;">
    <div class="bio-face-frame mb-3">
      <video id="bioVideo" class="bio-video" autoplay playsinline muted></video>
      <div class="bio-face-outline"></div>
      <div class="bio-face-grid"></div>
      <div class="bio-scan-line"></div>
    </div>
    <p class="small mb-2" id="bio-instruction">Align your face inside the frame and start scan</p>
    <button type="button" id="startBioScan" class="btn btn-outline-light btn-sm px-4">Start face scan</button>
  </div>
</div>

<button id="registerSubmit" type="submit" class="btn btn-success w-100 btn-lg" disabled>
  Complete biometric scan to continue
</button>
```

```js
// JS gate: camera preview + fake face scan must complete before submit is enabled
(function(){
  const startBtn = document.getElementById('startBioScan');
  const statusLabel = document.getElementById('bio-status-label');
  const instruction = document.getElementById('bio-instruction');
  const submitBtn = document.getElementById('registerSubmit');
  const frame = document.querySelector('.bio-face-frame');
  const video = document.getElementById('bioVideo');
  if (!startBtn || !statusLabel || !instruction || !submitBtn || !frame) return;
  let scanning = false;
  startBtn.addEventListener('click', function(){
    if (scanning) return;
    scanning = true;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Starting camera...';

    const startFakeScan = function(){
      submitBtn.textContent = 'Scanning face...';
      statusLabel.textContent = 'Scanning';
      instruction.textContent = 'Keep your face inside the frame while we verify...';
      frame.classList.add('is-scanning');
      setTimeout(function(){
        frame.classList.remove('is-scanning');
        frame.classList.add('is-verified');
        statusLabel.textContent = 'Verified';
        instruction.textContent = 'Biometric check completed successfully. Camera can now be closed.';
        submitBtn.disabled = false;
        submitBtn.textContent = 'Create account';
        scanning = false;
      }, 2800);
    };

    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia && video) {
      navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } }).then(function(stream){
        try {
          video.srcObject = stream;
        } catch (e) {
          video.src = window.URL.createObjectURL(stream);
        }
        video.play().catch(function(){});
        startFakeScan();
      }).catch(function(){
        instruction.textContent = 'Camera permission denied. Proceeding with simulated scan only.';
        startFakeScan();
      });
    } else {
      instruction.textContent = 'Camera not available. Proceeding with simulated scan only.';
      startFakeScan();
    }
  });
})();
```

RESULTS
The login and register pages now match the GlowAura styling, show flash messages for errors/success, and work with `UserController.js`: users can register and log in, with admins redirected to `/inventory` and normal users redirected to `/shopping`. The register page also includes a realistic, front-end-only biometric face-scan step that opens the user’s camera inside the frame (via `getUserMedia`) and then runs a short fake scan animation before the Create account button is enabled, mimicking an additional security check without changing backend logic.
